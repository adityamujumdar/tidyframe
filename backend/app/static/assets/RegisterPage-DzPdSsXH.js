import{j as e,c as J,k as Q,P as A,l as V,m as U,n as L,o as W}from"./ui-By_2Fhe3.js";import{r as o,L as E,e as ee,N as se}from"./router-BpYP0_uS.js";import{j as q,k as te,u as ae,C as re,a as oe,b as ne,c as ce,d as ie,A as le,e as de,L as S,U as ue,I as _,f as B,E as D,g as M,h as me,B as pe,i as he,t as fe}from"./index-Dm6eGH54.js";import{u as xe}from"./index-CW3Nip_5.js";import{M as be}from"./mail-Ck0uOppA.js";import"./vendor-9sitkZcQ.js";var R="Checkbox",[ge,Ee]=J(R),[ye,F]=ge(R);function ve(a){const{__scopeCheckbox:i,checked:n,children:m,defaultChecked:s,disabled:r,form:h,name:g,onCheckedChange:d,required:y,value:x="on",internal_do_not_use_render:f}=a,[p,w]=V({prop:n,defaultProp:s??!1,onChange:d,caller:R}),[b,v]=o.useState(null),[C,t]=o.useState(null),u=o.useRef(!1),P=b?!!h||!!b.closest("form"):!0,j={checked:p,disabled:r,setChecked:w,control:b,setControl:v,name:g,form:h,value:x,hasConsumerStoppedPropagationRef:u,required:y,defaultChecked:N(s)?!1:s,isFormControl:P,bubbleInput:C,setBubbleInput:t};return e.jsx(ye,{scope:i,...j,children:Ce(f)?f(j):m})}var O="CheckboxTrigger",H=o.forwardRef(({__scopeCheckbox:a,onKeyDown:i,onClick:n,...m},s)=>{const{control:r,value:h,disabled:g,checked:d,required:y,setControl:x,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:w,bubbleInput:b}=F(O,a),v=U(s,x),C=o.useRef(d);return o.useEffect(()=>{const t=r?.form;if(t){const u=()=>f(C.current);return t.addEventListener("reset",u),()=>t.removeEventListener("reset",u)}},[r,f]),e.jsx(A.button,{type:"button",role:"checkbox","aria-checked":N(d)?"mixed":d,"aria-required":y,"data-state":X(d),"data-disabled":g?"":void 0,disabled:g,value:h,...m,ref:v,onKeyDown:L(i,t=>{t.key==="Enter"&&t.preventDefault()}),onClick:L(n,t=>{f(u=>N(u)?!0:!u),b&&w&&(p.current=t.isPropagationStopped(),p.current||t.stopPropagation())})})});H.displayName=O;var T=o.forwardRef((a,i)=>{const{__scopeCheckbox:n,name:m,checked:s,defaultChecked:r,required:h,disabled:g,value:d,onCheckedChange:y,form:x,...f}=a;return e.jsx(ve,{__scopeCheckbox:n,checked:s,defaultChecked:r,disabled:g,required:h,onCheckedChange:y,name:m,form:x,value:d,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(H,{...f,ref:i,__scopeCheckbox:n}),p&&e.jsx(K,{__scopeCheckbox:n})]})})});T.displayName=R;var z="CheckboxIndicator",G=o.forwardRef((a,i)=>{const{__scopeCheckbox:n,forceMount:m,...s}=a,r=F(z,n);return e.jsx(Q,{present:m||N(r.checked)||r.checked===!0,children:e.jsx(A.span,{"data-state":X(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:i,style:{pointerEvents:"none",...a.style}})})});G.displayName=z;var $="CheckboxBubbleInput",K=o.forwardRef(({__scopeCheckbox:a,...i},n)=>{const{control:m,hasConsumerStoppedPropagationRef:s,checked:r,defaultChecked:h,required:g,disabled:d,name:y,value:x,form:f,bubbleInput:p,setBubbleInput:w}=F($,a),b=U(n,w),v=xe(r),C=W(m);o.useEffect(()=>{const u=p;if(!u)return;const P=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(P,"checked").set,c=!s.current;if(v!==r&&l){const k=new Event("click",{bubbles:c});u.indeterminate=N(r),l.call(u,N(r)?!1:r),u.dispatchEvent(k)}},[p,v,r,s]);const t=o.useRef(N(r)?!1:r);return e.jsx(A.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??t.current,required:g,disabled:d,name:y,value:x,form:f,...i,tabIndex:-1,ref:b,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});K.displayName=$;function Ce(a){return typeof a=="function"}function N(a){return a==="indeterminate"}function X(a){return N(a)?"indeterminate":a?"checked":"unchecked"}const I=o.forwardRef(({className:a,...i},n)=>e.jsx(T,{ref:n,className:q("peer h-5 w-5 shrink-0 rounded-sm border-2 border-primary ring-offset-background transition-all duration-instant focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...i,children:e.jsx(G,{className:q("flex items-center justify-center text-current"),children:e.jsx(te,{className:"h-4 w-4"})})}));I.displayName=T.displayName;function je({termsAccepted:a,onTermsAcceptedChange:i,privacyAccepted:n,onPrivacyAcceptedChange:m}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(I,{id:"terms-acceptance",checked:a,onCheckedChange:i,className:"mt-0.5"}),e.jsxs("label",{htmlFor:"terms-acceptance",className:"text-sm cursor-pointer leading-relaxed",children:["I agree to the"," ",e.jsx(E,{to:"/legal/terms-of-service",className:"text-primary underline font-medium",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," ","(includes attestations: 18+ age, US location, and arbitration agreement)"]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(I,{id:"privacy-acceptance",checked:n,onCheckedChange:m,className:"mt-0.5"}),e.jsxs("label",{htmlFor:"privacy-acceptance",className:"text-sm cursor-pointer leading-relaxed",children:["I agree to the"," ",e.jsx(E,{to:"/legal/privacy-policy",className:"text-primary underline font-medium",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground/60 mt-4 leading-relaxed",children:"By agreeing to the Terms of Service, you attest that you are at least 18 years old, located in the United States, and acknowledge the mandatory arbitration clause. All data processing is described in our Privacy Policy."})]})}function Re(){const{user:a,register:i}=ae(),[n]=ee(),m=n.get("billing")||"monthly",[s,r]=o.useState({fullName:"",email:"",password:"",confirmPassword:""}),[h,g]=o.useState(!1),[d,y]=o.useState(!1),[x,f]=o.useState(!1),[p,w]=o.useState(!1),[b,v]=o.useState(!1),[C,t]=o.useState("");if(a&&!b)return e.jsx(se,{to:"/dashboard",replace:!0});const u=()=>{if(!s.fullName.trim())return t("Full name is required"),!1;if(!s.email.trim())return t("Email is required"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email))return t("Please enter a valid email address"),!1;if(s.password.length<12)return t("Password must be at least 12 characters"),!1;const c=/[A-Z]/.test(s.password),k=/[a-z]/.test(s.password),Y=/\d/.test(s.password),Z=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(s.password);return!c||!k||!Y||!Z?(t("Password must contain uppercase, lowercase, number, and symbol"),!1):s.password!==s.confirmPassword?(t("Passwords do not match"),!1):x?p?!0:(t("You must accept the Privacy Policy"),!1):(t("You must accept the Terms of Service (which includes attestations for age 18+, US location, and arbitration agreement)"),!1)},P=async l=>{if(l.preventDefault(),t(""),!!u()){v(!0);try{(await i(s.email,s.password,s.fullName,{age_verified:!0,terms_accepted:x,privacy_accepted:p,arbitration_acknowledged:!0,location_confirmed:!0,consent_timestamp:new Date().toISOString(),user_agent:navigator.userAgent,billing_period:m}))?.checkout_url||fe.success("Account created successfully! Please complete your subscription to access all features.")}catch(c){const k=c instanceof Error&&"response"in c&&c.response&&typeof c.response=="object"&&"data"in c.response&&c.response.data&&typeof c.response.data=="object"&&"message"in c.response.data&&typeof c.response.data.message=="string"?c.response.data.message:"Registration failed. Please try again.";t(k)}finally{v(!1)}}},j=(l,c)=>{r(k=>({...k,[l]:c}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4 py-8",children:e.jsxs(re,{className:"w-full max-w-md",children:[e.jsxs(oe,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(E,{to:"/",children:e.jsx("img",{src:"/logo-with-name.png",alt:"TidyFrame",className:"h-50"})})}),e.jsx(ne,{className:"text-2xl font-bold",children:"Create your account"}),e.jsx(ce,{children:"Get started with tidyframe.com today"})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs(ie,{className:"space-y-4",children:[C&&e.jsx(le,{variant:"destructive",children:e.jsx(de,{children:C})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"fullName",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(_,{id:"fullName",type:"text",placeholder:"Enter your full name",value:s.fullName,onChange:l=>j("fullName",l.target.value),className:"pl-9",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(_,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:l=>j("email",l.target.value),className:"pl-9",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(_,{id:"password",type:h?"text":"password",placeholder:"Create a password",value:s.password,onChange:l=>j("password",l.target.value),className:"pl-9 pr-9",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:h?e.jsx(D,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-caption text-muted-foreground",children:"Must be at least 12 characters with mixed case, numbers, and symbols"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(_,{id:"confirmPassword",type:d?"text":"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:l=>j("confirmPassword",l.target.value),className:"pl-9 pr-9",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!d),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:d?e.jsx(D,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsx(je,{termsAccepted:x,onTermsAcceptedChange:f,privacyAccepted:p,onPrivacyAcceptedChange:w})]}),e.jsxs(me,{className:"flex flex-col space-y-4",children:[e.jsx(pe,{type:"submit",className:"w-full",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create account"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(E,{to:"/auth/login",className:"text-primary hover:underline",children:"Sign in"})]})]})]})]})})}export{Re as default};
//# sourceMappingURL=RegisterPage-DzPdSsXH.js.map
