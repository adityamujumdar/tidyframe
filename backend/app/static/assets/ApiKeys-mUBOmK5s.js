import{B as z,j as e,E as Ne,F as De,G as we,m as H,W as be,c as Ce,H as Pe,n as _e,y as Ie,J as Se,K as Te,M as B,O as Ke}from"./ui-By_2Fhe3.js";import{r as o}from"./router-BpYP0_uS.js";import{l as Ee,j as g,V as U,W as D,t as n,B as m,L as T,I as K,K as P,A as Re,T as Oe,X as $e,e as Me,C as ke,a as Fe,b as Le,c as ze,d as He,o as Be,E as Ue,g as Ye,r as Ge}from"./index-RhPb3fO2.js";import{D as E,f as We,a as R,b as O,c as $,d as M,e as k}from"./dialog-D2fnvFi_.js";import{T as qe,a as Ve,b as F,c as x,d as Je,e as u}from"./table-DirwzfHf.js";import{S as Xe,E as Qe}from"./SkeletonCard-D_sFxU1N.js";import{f as L,a as Ze}from"./format-CI9fAwaI.js";import{C as ea}from"./copy-Bq2x4uXm.js";import{C as aa}from"./calendar-DIr25tDZ.js";import{T as sa}from"./trash-2-lwngIhnD.js";import"./vendor-9sitkZcQ.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ra=Ee("plus",ta);var Y="AlertDialog",[oa,Ka]=Ce(Y,[z]),d=z(),G=a=>{const{__scopeAlertDialog:s,...r}=a,i=d(s);return e.jsx(Ne,{...i,...r,modal:!0})};G.displayName=Y;var ia="AlertDialogTrigger",W=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,l=d(r);return e.jsx(De,{...l,...i,ref:s})});W.displayName=ia;var la="AlertDialogPortal",q=a=>{const{__scopeAlertDialog:s,...r}=a,i=d(s);return e.jsx(we,{...i,...r})};q.displayName=la;var na="AlertDialogOverlay",V=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,l=d(r);return e.jsx(Ke,{...l,...i,ref:s})});V.displayName=na;var A="AlertDialogContent",[ca,da]=oa(A),pa=Ie("AlertDialogContent"),J=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,children:i,...l}=a,p=d(r),y=o.useRef(null),v=H(s,y),f=o.useRef(null);return e.jsx(be,{contentName:A,titleName:X,docsSlug:"alert-dialog",children:e.jsx(ca,{scope:r,cancelRef:f,children:e.jsxs(Pe,{role:"alertdialog",...p,...l,ref:v,onOpenAutoFocus:_e(l.onOpenAutoFocus,h=>{h.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[e.jsx(pa,{children:i}),e.jsx(xa,{contentRef:y})]})})})});J.displayName=A;var X="AlertDialogTitle",Q=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,l=d(r);return e.jsx(Se,{...l,...i,ref:s})});Q.displayName=X;var Z="AlertDialogDescription",ee=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,l=d(r);return e.jsx(Te,{...l,...i,ref:s})});ee.displayName=Z;var ma="AlertDialogAction",ae=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,l=d(r);return e.jsx(B,{...l,...i,ref:s})});ae.displayName=ma;var se="AlertDialogCancel",te=o.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,{cancelRef:l}=da(se,r),p=d(r),y=H(s,l);return e.jsx(B,{...p,...i,ref:y})});te.displayName=se;var xa=({contentRef:a})=>{const s=`\`${A}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${A}\` by passing a \`${Z}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${A}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{const r=document.getElementById(a.current?.getAttribute("aria-describedby"))},[s,a]),null},ua=G,ga=W,ha=q,re=V,oe=J,ie=ae,le=te,ne=Q,ce=ee;const ya=ua,fa=ga,ja=ha,de=o.forwardRef(({className:a,...s},r)=>e.jsx(re,{className:g("fixed inset-0 z-modal bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:r}));de.displayName=re.displayName;const pe=o.forwardRef(({className:a,...s},r)=>e.jsxs(ja,{children:[e.jsx(de,{}),e.jsx(oe,{ref:r,className:g("fixed left-[50%] top-[50%] z-modal grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-xl duration-normal data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-modal",a),...s})]}));pe.displayName=oe.displayName;const me=({className:a,...s})=>e.jsx("div",{className:g("flex flex-col space-y-2 text-center sm:text-left",a),...s});me.displayName="AlertDialogHeader";const xe=({className:a,...s})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});xe.displayName="AlertDialogFooter";const ue=o.forwardRef(({className:a,...s},r)=>e.jsx(ne,{ref:r,className:g("text-xl font-semibold",a),...s}));ue.displayName=ne.displayName;const ge=o.forwardRef(({className:a,...s},r)=>e.jsx(ce,{ref:r,className:g("text-subhead text-muted-foreground",a),...s}));ge.displayName=ce.displayName;const he=o.forwardRef(({className:a,...s},r)=>e.jsx(ie,{ref:r,className:g(U(),a),...s}));he.displayName=ie.displayName;const ye=o.forwardRef(({className:a,...s},r)=>e.jsx(le,{ref:r,className:g(U({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));ye.displayName=le.displayName;class Aa{baseUrl="/api/apikeys";async listAPIKeys(){return await D.get(`${this.baseUrl}/`)}async createAPIKey(s){return await D.post(`${this.baseUrl}/`,s)}async deleteAPIKey(s){await D.delete(`${this.baseUrl}/${s}`)}async toggleAPIKeyStatus(s){return await D.patch(`${this.baseUrl}/${s}/toggle`)}}const w=new Aa;function Ea(){const[a,s]=o.useState([]),[r,i]=o.useState(!0),[l,p]=o.useState(!1),[y,v]=o.useState(!1),[f,h]=o.useState(null),[_,I]=o.useState(!1),[j,b]=o.useState({name:"",expires_days:""});o.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0);const t=await w.listAPIKeys();s(t)}catch{n.error("Failed to load API keys")}finally{i(!1)}},fe=async t=>{if(t.preventDefault(),!j.name.trim()){n.error("Please enter a name for the API key");return}try{I(!0);const c={name:j.name.trim(),...j.expires_days&&{expires_days:parseInt(j.expires_days)}},ve=await w.createAPIKey(c);h(ve),p(!1),v(!0),b({name:"",expires_days:""}),await N(),n.success("API key created successfully")}catch{n.error("Failed to create API key")}finally{I(!1)}},je=async(t,c)=>{try{await w.deleteAPIKey(t),await N(),n.success(`API key "${c}" deleted successfully`)}catch{n.error("Failed to delete API key")}},S=async(t,c)=>{try{await w.toggleAPIKeyStatus(t),await N(),n.success(`API key "${c}" status updated`)}catch{n.error("Failed to update API key status")}},Ae=async t=>{try{await navigator.clipboard.writeText(t),n.success("Copied to clipboard")}catch{n.error("Failed to copy to clipboard")}},C=t=>t?new Date(t)<new Date:!1;return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"API Keys"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your API keys for programmatic access"})]}),e.jsx(Xe,{variant:"table",showHeader:!0,rows:3})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"API Keys"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your API keys for programmatic access"})]}),e.jsxs(E,{open:l,onOpenChange:p,children:[e.jsx(We,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),"Create API Key"]})}),e.jsxs(R,{children:[e.jsxs(O,{children:[e.jsx($,{children:"Create New API Key"}),e.jsx(M,{children:"Generate a new API key for programmatic access to your account."})]}),e.jsxs("form",{onSubmit:fe,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"keyName",children:"Name *"}),e.jsx(K,{id:"keyName",placeholder:"e.g., Production API, Development Key",value:j.name,onChange:t=>b(c=>({...c,name:t.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"expireDays",children:"Expires in (days)"}),e.jsx(K,{id:"expireDays",type:"number",min:"1",max:"365",placeholder:"Leave empty for no expiration",value:j.expires_days,onChange:t=>b(c=>({...c,expires_days:t.target.value}))})]})]}),e.jsxs(k,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(m,{type:"submit",disabled:_,children:_?"Creating...":"Create Key"})]})]})]})]})]}),e.jsx(E,{open:y,onOpenChange:v,children:e.jsxs(R,{children:[e.jsxs(O,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"API Key Created"]}),e.jsx(M,{children:"Your API key has been generated. Copy it now as it won't be shown again."})]}),f&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("code",{className:"text-sm font-mono break-all flex-1",children:f.api_key}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>Ae(f.api_key),children:e.jsx(ea,{className:"h-4 w-4"})})]})}),e.jsxs(Re,{variant:"default",className:"bg-status-warning-bg border-status-warning-border",children:[e.jsx(Oe,{className:"h-5 w-5 text-status-warning"}),e.jsx($e,{className:"text-status-warning",children:"Important!"}),e.jsx(Me,{children:"This is the only time you'll see the full API key. Make sure to copy and store it securely."})]})]}),e.jsx(k,{children:e.jsx(m,{onClick:()=>v(!1),children:"I've Saved My Key"})})]})}),e.jsxs(ke,{children:[e.jsxs(Fe,{children:[e.jsxs(Le,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Your API Keys"]}),e.jsx(ze,{children:a.length===0?"You don't have any API keys yet. Create one to get started.":`You have ${a.length} API key${a.length!==1?"s":""}.`})]}),e.jsx(He,{children:a.length===0?e.jsx(Qe,{icon:P,title:"No API Keys",description:"Create your first API key to start using the TidyFrame API programmatically.",actionLabel:"Create Your First API Key",onAction:()=>p(!0),size:"lg",showBranding:!0}):e.jsxs(qe,{children:[e.jsx(Ve,{children:e.jsxs(F,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Key"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Usage"}),e.jsx(x,{children:"Last Used"}),e.jsx(x,{children:"Created"}),e.jsx(x,{children:"Expires"}),e.jsx(x,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(Je,{children:a.map(t=>e.jsxs(F,{children:[e.jsx(u,{className:"font-medium",children:t.name}),e.jsx(u,{children:e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:t.key_hint})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{variant:t.is_active?C(t.expires_at)?"destructive":"default":"destructive",children:t.is_active?C(t.expires_at)?"Expired":"Active":"Disabled"}),t.is_active&&!C(t.expires_at)&&e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>S(t.id,t.name),children:e.jsx(Ue,{className:"h-4 w-4"})}),!t.is_active&&e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>S(t.id,t.name),children:e.jsx(Ye,{className:"h-4 w-4"})})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),t.usage_count.toLocaleString()]})}),e.jsx(u,{className:"text-muted-foreground",children:L(t.last_used_at)}),e.jsx(u,{className:"text-muted-foreground",children:Ze(t.created_at)}),e.jsx(u,{className:"text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(aa,{className:"h-4 w-4"}),t.expires_at?L(t.expires_at):"Never"]})}),e.jsx(u,{children:e.jsxs(ya,{children:[e.jsx(fa,{asChild:!0,children:e.jsx(m,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",children:e.jsx(sa,{className:"h-4 w-4"})})}),e.jsxs(pe,{children:[e.jsxs(me,{children:[e.jsx(ue,{children:"Delete API Key"}),e.jsxs(ge,{children:['Are you sure you want to delete the API key "',t.name,'"? This action cannot be undone and will immediately revoke access.']})]}),e.jsxs(xe,{children:[e.jsx(ye,{children:"Cancel"}),e.jsx(he,{onClick:()=>je(t.id,t.name),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Key"})]})]})]})})]},t.id))})]})})]})]})}export{Ea as default};
//# sourceMappingURL=ApiKeys-mUBOmK5s.js.map
