import{j as e}from"./ui-By_2Fhe3.js";import{e as v,r,N as b,L as a}from"./router-BpYP0_uS.js";import{u as w,C as i,a as l,i as C,b as c,c as n,h as u,B as o,d as E,A as k,e as V}from"./index-BH6X8p7N.js";import{C as S}from"./circle-check-big-Rr6Odbyy.js";import{C as P}from"./circle-x-yYZwS7QE.js";import"./vendor-9sitkZcQ.js";function Y(){const{user:d,verifyEmail:m}=w(),[j]=v(),[p,x]=r.useState(!0),[N,g]=r.useState(!1),[f,h]=r.useState(""),t=j.get("token");return r.useEffect(()=>{(async()=>{if(!t){h("Verification token is missing"),x(!1);return}try{await m(t),g(!0)}catch(s){const y=s instanceof Error&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response&&s.response.data&&typeof s.response.data=="object"&&"message"in s.response.data&&typeof s.response.data.message=="string"?s.response.data.message:"Email verification failed";h(y)}finally{x(!1)}})()},[t,m]),d&&d.emailVerified?e.jsx(b,{to:"/dashboard",replace:!0}):p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsx(i,{className:"w-full max-w-md",children:e.jsxs(l,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(a,{to:"/",children:e.jsx("img",{src:"/logo-with-name.png",alt:"TidyFrame",className:"h-12"})})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(C,{className:"h-12 w-12 text-primary animate-spin"})}),e.jsx(c,{className:"text-2xl font-bold",children:"Verifying your email"}),e.jsx(n,{children:"Please wait while we verify your email address..."})]})})}):N?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(i,{className:"w-full max-w-md",children:[e.jsxs(l,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(a,{to:"/",children:e.jsx("img",{src:"/logo-with-name.png",alt:"TidyFrame",className:"h-12"})})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(S,{className:"h-12 w-12 text-status-success"})}),e.jsx(c,{className:"text-2xl font-bold text-status-success",children:"Email verified successfully!"}),e.jsx(n,{children:"Your email address has been verified. You can now access all features."})]}),e.jsx(u,{className:"flex flex-col space-y-4",children:e.jsx(a,{to:"/dashboard",className:"w-full",children:e.jsx(o,{className:"w-full",children:"Go to Dashboard"})})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(i,{className:"w-full max-w-md",children:[e.jsxs(l,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(a,{to:"/",children:e.jsx("img",{src:"/logo-with-name.png",alt:"TidyFrame",className:"h-12"})})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(P,{className:"h-12 w-12 text-status-error"})}),e.jsx(c,{className:"text-2xl font-bold text-status-error",children:"Email verification failed"}),e.jsx(n,{children:"We couldn't verify your email address"})]}),e.jsx(E,{children:f&&e.jsx(k,{variant:"destructive",children:e.jsx(V,{children:f})})}),e.jsxs(u,{className:"flex flex-col space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"The verification link may have expired or is invalid. Please request a new verification email from your account settings."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx(a,{to:"/auth/login",className:"flex-1",children:e.jsx(o,{variant:"outline",className:"w-full",children:"Sign In"})}),e.jsx(a,{to:"/dashboard",className:"flex-1",children:e.jsx(o,{className:"w-full",children:"Go to Dashboard"})})]})]})]})})}export{Y as default};
//# sourceMappingURL=EmailVerificationPage-C0aXzdM5.js.map
