import{j as e}from"./ui-By_2Fhe3.js";import{r as l}from"./router-BpYP0_uS.js";import{l as k,T as I,j as a}from"./index-Dm6eGH54.js";import{C as L}from"./clock-CnDSZUBK.js";import{c as B}from"./format-CI9fAwaI.js";import{i as P,j as U}from"./status-Dw32TaKU.js";import{T as q}from"./trending-up-vcqMjshx.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M5 12h14",key:"1ays0h"}]],H=k("minus",G);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],K=k("trending-down",J);function ee({expiresAt:r,className:u="",showIcon:x=!0,warningThreshold:o=2}){const[t,n]=l.useState({minutes:0,seconds:0,isExpired:!1,isWarning:!1});if(l.useEffect(()=>{if(!r){n({minutes:0,seconds:0,isExpired:!0,isWarning:!1});return}const i=()=>{const g=new Date().getTime(),c=new Date(r).getTime()-g;if(c<=0){n({minutes:0,seconds:0,isExpired:!0,isWarning:!1});return}const p=Math.floor(c/(1e3*60)),N=Math.floor(c%(1e3*60)/1e3),h=p<o;n({minutes:p,seconds:N,isExpired:!1,isWarning:h})};i();const d=setInterval(i,1e3);return()=>clearInterval(d)},[r,o]),!r)return null;const s=()=>t.isExpired?"text-destructive":t.isWarning?"text-warning":"text-muted-foreground",m=()=>t.isExpired?"bg-destructive/10 border-destructive/20":t.isWarning?"bg-warning/10 border-warning/20":"bg-muted/50 border-border",f=(i,d)=>i>0?`${i}m ${d.toString().padStart(2,"0")}s`:`${d}s`;return e.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-2 rounded-lg border ${m()} ${u}`,children:[x&&e.jsx("div",{className:`flex-shrink-0 ${s()}`,children:t.isWarning||t.isExpired?e.jsx(I,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:`text-sm font-medium ${s()}`,children:t.isExpired?"File expired":`Expires in: ${f(t.minutes,t.seconds)}`}),!t.isExpired&&e.jsx("div",{className:"text-caption text-muted-foreground",children:"Files are automatically deleted after 10 minutes"}),t.isExpired&&e.jsx("div",{className:"text-caption text-destructive",children:"This file has been permanently deleted"})]})]})}const O=l.forwardRef(({value:r,label:u,variant:x="default",icon:o,size:t="md",subtitle:n,previousValue:s,trend:m,showTrend:f=!1,trendLabel:i,isLoading:d=!1,className:g,formatValue:$=!0,onClick:c,ariaLabel:p,...N},h)=>{const w=l.useMemo(()=>{if(m)return m;if(!(s===void 0||typeof r!="number"))return r>s?"up":r<s?"down":"neutral"},[m,r,s]),j=l.useMemo(()=>{if(!s||typeof r!="number"||s===0)return null;const F=(r-s)/s*100;return Math.abs(F).toFixed(1)},[r,s]),y=typeof r=="number"&&$?B(r):r,C={sm:"p-2",md:"p-4",lg:"p-6"},S={sm:"text-xl",md:"text-2xl",lg:"text-hero"},T={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},E=P(x),M=U(x),W=()=>{switch(w){case"up":return q;case"down":return K;case"neutral":return H;default:return null}},R=()=>{switch(w){case"up":return"text-status-success";case"down":return"text-status-error";case"neutral":return"text-muted-foreground";default:return""}},b=W(),_=R(),v=i||(j?`${j}%`:""),D=p||`${y} ${u}${n?` - ${n}`:""}${v?` - ${w} ${v}`:""}`;return d?e.jsx("div",{ref:h,className:a("text-center rounded-lg border",E,C[t],g),role:"status","aria-label":"Loading metric",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[o&&e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:a(T[t],"bg-muted rounded")})}),e.jsx("div",{className:a("h-8 bg-muted rounded mx-auto",t==="sm"?"w-12":t==="lg"?"w-20":"w-16")}),e.jsx("div",{className:"h-3 bg-muted rounded mx-auto w-16"}),n&&e.jsx("div",{className:"h-2 bg-muted rounded mx-auto w-12"})]})}):e.jsxs("div",{ref:h,role:"figure","aria-label":D,className:a("text-center rounded-lg border transition-all duration-fast",E,C[t],c&&"cursor-pointer hover:shadow-dropdown",g),onClick:c,...N,children:[o&&e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(o,{className:a(T[t],M),"aria-hidden":"true"})}),e.jsx("p",{className:a(S[t],"font-bold",M),children:y}),f&&b&&e.jsxs("div",{className:a("flex items-center justify-center gap-1 mt-1",_),children:[e.jsx(b,{className:"h-3 w-3","aria-hidden":"true"}),e.jsx("span",{className:"text-caption font-medium",children:i||j&&`${j}%`})]}),e.jsx("p",{className:a("text-caption text-muted-foreground",f&&b?"mt-0.5":"mt-1"),children:u}),n&&e.jsx("p",{className:"text-caption text-muted-foreground opacity-75 mt-0.5",children:n})]})});O.displayName="MetricCard";export{ee as C,O as M};
//# sourceMappingURL=MetricCard-CV-sjIJD.js.map
