import{j as e}from"./ui-CDVFbD1c.js";import{d as L,u as P,r as t,N as f,L as n}from"./router-Cc-HybBK.js";import{u as k,C as F,a as A,b as D,c as M,d as q,A as B,e as I,L as g,I as j,f as T,E as H,g as O,h as R,B as W,i as z,t as y}from"./index-CKLB544Z.js";import{M as G}from"./mail-zBEh3u8j.js";import"./vendor-9sitkZcQ.js";function X(){const{user:i,login:N,hasActiveSubscription:b,checkSubscriptionStatus:v}=k(),l=L(),c=P(),[d,w]=t.useState(""),[m,S]=t.useState(""),[r,C]=t.useState(!1),[u,p]=t.useState(!1),[h,x]=t.useState("");if(i)if(i.plan==="enterprise"||b){const a=l.state?.from?.pathname||"/dashboard";return e.jsx(f,{to:a,replace:!0})}else return e.jsx(f,{to:"/pricing",replace:!0});const E=async a=>{a.preventDefault(),p(!0),x("");try{if(await N(d,m),y.success("Login successful!"),await v()){const o=l.state?.from?.pathname||"/dashboard";c(o,{replace:!0})}else c("/pricing",{replace:!0}),y.info("Please complete your subscription to access all features.")}catch(s){const o=s instanceof Error&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response&&s.response.data&&typeof s.response.data=="object"&&"message"in s.response.data&&typeof s.response.data.message=="string"?s.response.data.message:"Login failed. Please try again.";x(o)}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(A,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(n,{to:"/",children:e.jsx("img",{src:"/logo-with-name.png",alt:"TidyFrame",className:"h-29"})})}),e.jsx(D,{className:"text-2xl font-bold",children:"Welcome back"}),e.jsx(M,{children:"Sign in to your tidyframe.com account"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs(q,{className:"space-y-4",children:[h&&e.jsx(B,{variant:"destructive",children:e.jsx(I,{children:h})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(j,{id:"email",type:"email",placeholder:"Enter your email",value:d,onChange:a=>w(a.target.value),className:"pl-9",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(j,{id:"password",type:r?"text":"password",placeholder:"Enter your password",value:m,onChange:a=>S(a.target.value),className:"pl-9 pr-9",required:!0}),e.jsx("button",{type:"button",onClick:()=>C(!r),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:r?e.jsx(H,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{to:"/auth/reset-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})})]}),e.jsxs(R,{className:"flex flex-col space-y-4",children:[e.jsx(W,{type:"submit",className:"w-full",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(n,{to:"/auth/register",className:"text-primary hover:underline",children:"Sign up"})]})]})]})]})})}export{X as default};
//# sourceMappingURL=LoginPage-CXd-hpTU.js.map
