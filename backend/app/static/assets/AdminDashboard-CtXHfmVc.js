import{v as Je,p as kt,l as $e,j as e,w as Ot,c as Vt,q as Fe,N as Bt,m as F,a as X,P as D,A as Ft,n as P,Q as Ht,u as $t,U as zt,V as Wt,X as Kt,Y as qt,Z as Gt,D as Yt,x as Xt,z as Jt}from"./ui-By_2Fhe3.js";import{r as n,a as Ze}from"./router-BpYP0_uS.js";import{l as be,j as J,k as Zt,W,p as Y,t as K,R as ye,B as ie,C as me,a as he,b as fe,y as Qt,d as xe,r as es,J as ts,c as ss,L as we,I as ze,o as ns,O as os,a2 as rs,a3 as as,a6 as ls,a7 as is,a8 as cs,a9 as Ae}from"./index-BH6X8p7N.js";import{u as ds}from"./index-CW3Nip_5.js";import{V as us,a as Qe,C as ps,S as ms}from"./index-Dj2z-qXG.js";import{T as hs,a as fs,b as We,c as ne,d as xs,e as oe}from"./table-CNlI6l6g.js";import{D as gs,a as vs,b as Ss,c as ys,d as ws,e as js}from"./dialog-bwlcXZGd.js";import{D as bs}from"./dollar-sign-D3Z0h0wb.js";import"./vendor-9sitkZcQ.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Cs=be("ellipsis",Ns);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ts=be("square-pen",_s);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ke=be("user-check",Is);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],qe=be("user-x",Ps);function Ge(o,[s,t]){return Math.min(t,Math.max(s,o))}var Es=[" ","Enter","ArrowUp","ArrowDown"],Rs=[" ","Enter"],re="Select",[Ne,Ce,Ms]=Bt(re),[ue,gn]=Vt(re,[Ms,Je]),_e=Je(),[As,Z]=ue(re),[Ds,Ls]=ue(re),et=o=>{const{__scopeSelect:s,children:t,open:a,defaultOpen:l,onOpenChange:m,value:r,defaultValue:d,onValueChange:c,dir:h,name:g,autoComplete:S,disabled:_,required:N,form:w}=o,u=_e(s),[x,y]=n.useState(null),[p,v]=n.useState(null),[O,M]=n.useState(!1),ee=kt(h),[E,L]=$e({prop:a,defaultProp:l??!1,onChange:m,caller:re}),[V,i]=$e({prop:r,defaultProp:d,onChange:c,caller:re}),C=n.useRef(null),U=x?w||!!x.closest("form"):!0,[q,H]=n.useState(new Set),$=Array.from(q).map(R=>R.props.value).join(";");return e.jsx(Ot,{...u,children:e.jsxs(As,{required:N,scope:s,trigger:x,onTriggerChange:y,valueNode:p,onValueNodeChange:v,valueNodeHasChildren:O,onValueNodeHasChildrenChange:M,contentId:Fe(),value:V,onValueChange:i,open:E,onOpenChange:L,dir:ee,triggerPointerDownPosRef:C,disabled:_,children:[e.jsx(Ne.Provider,{scope:s,children:e.jsx(Ds,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(R=>{H(B=>new Set(B).add(R))},[]),onNativeOptionRemove:n.useCallback(R=>{H(B=>{const z=new Set(B);return z.delete(R),z})},[]),children:t})}),U?e.jsxs(Nt,{"aria-hidden":!0,required:N,tabIndex:-1,name:g,autoComplete:S,value:V,onChange:R=>i(R.target.value),disabled:_,form:w,children:[V===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},$):null]})})};et.displayName=re;var tt="SelectTrigger",st=n.forwardRef((o,s)=>{const{__scopeSelect:t,disabled:a=!1,...l}=o,m=_e(t),r=Z(tt,t),d=r.disabled||a,c=F(s,r.onTriggerChange),h=Ce(t),g=n.useRef("touch"),[S,_,N]=_t(u=>{const x=h().filter(v=>!v.disabled),y=x.find(v=>v.value===r.value),p=Tt(x,u,y);p!==void 0&&r.onValueChange(p.value)}),w=u=>{d||(r.onOpenChange(!0),N()),u&&(r.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(Ft,{asChild:!0,...m,children:e.jsx(D.button,{type:"button",role:"combobox","aria-controls":r.contentId,"aria-expanded":r.open,"aria-required":r.required,"aria-autocomplete":"none",dir:r.dir,"data-state":r.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Ct(r.value)?"":void 0,...l,ref:c,onClick:P(l.onClick,u=>{u.currentTarget.focus(),g.current!=="mouse"&&w(u)}),onPointerDown:P(l.onPointerDown,u=>{g.current=u.pointerType;const x=u.target;x.hasPointerCapture(u.pointerId)&&x.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(w(u),u.preventDefault())}),onKeyDown:P(l.onKeyDown,u=>{const x=S.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&_(u.key),!(x&&u.key===" ")&&Es.includes(u.key)&&(w(),u.preventDefault())})})})});st.displayName=tt;var nt="SelectValue",ot=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:a,style:l,children:m,placeholder:r="",...d}=o,c=Z(nt,t),{onValueNodeHasChildrenChange:h}=c,g=m!==void 0,S=F(s,c.onValueNodeChange);return X(()=>{h(g)},[h,g]),e.jsx(D.span,{...d,ref:S,style:{pointerEvents:"none"},children:Ct(c.value)?e.jsx(e.Fragment,{children:r}):m})});ot.displayName=nt;var Us="SelectIcon",rt=n.forwardRef((o,s)=>{const{__scopeSelect:t,children:a,...l}=o;return e.jsx(D.span,{"aria-hidden":!0,...l,ref:s,children:a||"▼"})});rt.displayName=Us;var ks="SelectPortal",at=o=>e.jsx(Ht,{asChild:!0,...o});at.displayName=ks;var ae="SelectContent",lt=n.forwardRef((o,s)=>{const t=Z(ae,o.__scopeSelect),[a,l]=n.useState();if(X(()=>{l(new DocumentFragment)},[]),!t.open){const m=a;return m?Ze.createPortal(e.jsx(it,{scope:o.__scopeSelect,children:e.jsx(Ne.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),m):null}return e.jsx(ct,{...o,ref:s})});lt.displayName=ae;var k=10,[it,Q]=ue(ae),Os="SelectContentImpl",Vs=qt("SelectContent.RemoveScroll"),ct=n.forwardRef((o,s)=>{const{__scopeSelect:t,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:m,onPointerDownOutside:r,side:d,sideOffset:c,align:h,alignOffset:g,arrowPadding:S,collisionBoundary:_,collisionPadding:N,sticky:w,hideWhenDetached:u,avoidCollisions:x,...y}=o,p=Z(ae,t),[v,O]=n.useState(null),[M,ee]=n.useState(null),E=F(s,f=>O(f)),[L,V]=n.useState(null),[i,C]=n.useState(null),U=Ce(t),[q,H]=n.useState(!1),$=n.useRef(!1);n.useEffect(()=>{if(v)return zt(v)},[v]),Wt();const R=n.useCallback(f=>{const[T,...A]=U().map(I=>I.ref.current),[j]=A.slice(-1),b=document.activeElement;for(const I of f)if(I===b||(I?.scrollIntoView({block:"nearest"}),I===T&&M&&(M.scrollTop=0),I===j&&M&&(M.scrollTop=M.scrollHeight),I?.focus(),document.activeElement!==b))return},[U,M]),B=n.useCallback(()=>R([L,v]),[R,L,v]);n.useEffect(()=>{q&&B()},[q,B]);const{onOpenChange:z,triggerPointerDownPosRef:G}=p;n.useEffect(()=>{if(v){let f={x:0,y:0};const T=j=>{f={x:Math.abs(Math.round(j.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(j.pageY)-(G.current?.y??0))}},A=j=>{f.x<=10&&f.y<=10?j.preventDefault():v.contains(j.target)||z(!1),document.removeEventListener("pointermove",T),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",A,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",A,{capture:!0})}}},[v,z,G]),n.useEffect(()=>{const f=()=>z(!1);return window.addEventListener("blur",f),window.addEventListener("resize",f),()=>{window.removeEventListener("blur",f),window.removeEventListener("resize",f)}},[z]);const[Te,ve]=_t(f=>{const T=U().filter(b=>!b.disabled),A=T.find(b=>b.ref.current===document.activeElement),j=Tt(T,f,A);j&&setTimeout(()=>j.ref.current.focus())}),Ie=n.useCallback((f,T,A)=>{const j=!$.current&&!A;(p.value!==void 0&&p.value===T||j)&&(V(f),j&&($.current=!0))},[p.value]),Pe=n.useCallback(()=>v?.focus(),[v]),le=n.useCallback((f,T,A)=>{const j=!$.current&&!A;(p.value!==void 0&&p.value===T||j)&&C(f)},[p.value]),Se=a==="popper"?De:dt,pe=Se===De?{side:d,sideOffset:c,align:h,alignOffset:g,arrowPadding:S,collisionBoundary:_,collisionPadding:N,sticky:w,hideWhenDetached:u,avoidCollisions:x}:{};return e.jsx(it,{scope:t,content:v,viewport:M,onViewportChange:ee,itemRefCallback:Ie,selectedItem:L,onItemLeave:Pe,itemTextRefCallback:le,focusSelectedItem:B,selectedItemText:i,position:a,isPositioned:q,searchRef:Te,children:e.jsx(Kt,{as:Vs,allowPinchZoom:!0,children:e.jsx(Gt,{asChild:!0,trapped:p.open,onMountAutoFocus:f=>{f.preventDefault()},onUnmountAutoFocus:P(l,f=>{p.trigger?.focus({preventScroll:!0}),f.preventDefault()}),children:e.jsx(Yt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:r,onFocusOutside:f=>f.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(Se,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:f=>f.preventDefault(),...y,...pe,onPlaced:()=>H(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:P(y.onKeyDown,f=>{const T=f.ctrlKey||f.altKey||f.metaKey;if(f.key==="Tab"&&f.preventDefault(),!T&&f.key.length===1&&ve(f.key),["ArrowUp","ArrowDown","Home","End"].includes(f.key)){let j=U().filter(b=>!b.disabled).map(b=>b.ref.current);if(["ArrowUp","End"].includes(f.key)&&(j=j.slice().reverse()),["ArrowUp","ArrowDown"].includes(f.key)){const b=f.target,I=j.indexOf(b);j=j.slice(I+1)}setTimeout(()=>R(j)),f.preventDefault()}})})})})})})});ct.displayName=Os;var Bs="SelectItemAlignedPosition",dt=n.forwardRef((o,s)=>{const{__scopeSelect:t,onPlaced:a,...l}=o,m=Z(ae,t),r=Q(ae,t),[d,c]=n.useState(null),[h,g]=n.useState(null),S=F(s,E=>g(E)),_=Ce(t),N=n.useRef(!1),w=n.useRef(!0),{viewport:u,selectedItem:x,selectedItemText:y,focusSelectedItem:p}=r,v=n.useCallback(()=>{if(m.trigger&&m.valueNode&&d&&h&&u&&x&&y){const E=m.trigger.getBoundingClientRect(),L=h.getBoundingClientRect(),V=m.valueNode.getBoundingClientRect(),i=y.getBoundingClientRect();if(m.dir!=="rtl"){const b=i.left-L.left,I=V.left-b,te=E.left-I,se=E.width+te,Ee=Math.max(se,L.width),Re=window.innerWidth-k,Me=Ge(I,[k,Math.max(k,Re-Ee)]);d.style.minWidth=se+"px",d.style.left=Me+"px"}else{const b=L.right-i.right,I=window.innerWidth-V.right-b,te=window.innerWidth-E.right-I,se=E.width+te,Ee=Math.max(se,L.width),Re=window.innerWidth-k,Me=Ge(I,[k,Math.max(k,Re-Ee)]);d.style.minWidth=se+"px",d.style.right=Me+"px"}const C=_(),U=window.innerHeight-k*2,q=u.scrollHeight,H=window.getComputedStyle(h),$=parseInt(H.borderTopWidth,10),R=parseInt(H.paddingTop,10),B=parseInt(H.borderBottomWidth,10),z=parseInt(H.paddingBottom,10),G=$+R+q+z+B,Te=Math.min(x.offsetHeight*5,G),ve=window.getComputedStyle(u),Ie=parseInt(ve.paddingTop,10),Pe=parseInt(ve.paddingBottom,10),le=E.top+E.height/2-k,Se=U-le,pe=x.offsetHeight/2,f=x.offsetTop+pe,T=$+R+f,A=G-T;if(T<=le){const b=C.length>0&&x===C[C.length-1].ref.current;d.style.bottom="0px";const I=h.clientHeight-u.offsetTop-u.offsetHeight,te=Math.max(Se,pe+(b?Pe:0)+I+B),se=T+te;d.style.height=se+"px"}else{const b=C.length>0&&x===C[0].ref.current;d.style.top="0px";const te=Math.max(le,$+u.offsetTop+(b?Ie:0)+pe)+A;d.style.height=te+"px",u.scrollTop=T-le+u.offsetTop}d.style.margin=`${k}px 0`,d.style.minHeight=Te+"px",d.style.maxHeight=U+"px",a?.(),requestAnimationFrame(()=>N.current=!0)}},[_,m.trigger,m.valueNode,d,h,u,x,y,m.dir,a]);X(()=>v(),[v]);const[O,M]=n.useState();X(()=>{h&&M(window.getComputedStyle(h).zIndex)},[h]);const ee=n.useCallback(E=>{E&&w.current===!0&&(v(),p?.(),w.current=!1)},[v,p]);return e.jsx(Hs,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:N,onScrollButtonChange:ee,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:e.jsx(D.div,{...l,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});dt.displayName=Bs;var Fs="SelectPopperPosition",De=n.forwardRef((o,s)=>{const{__scopeSelect:t,align:a="start",collisionPadding:l=k,...m}=o,r=_e(t);return e.jsx(Xt,{...r,...m,ref:s,align:a,collisionPadding:l,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});De.displayName=Fs;var[Hs,He]=ue(ae,{}),Le="SelectViewport",ut=n.forwardRef((o,s)=>{const{__scopeSelect:t,nonce:a,...l}=o,m=Q(Le,t),r=He(Le,t),d=F(s,m.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Ne.Slot,{scope:t,children:e.jsx(D.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:P(l.onScroll,h=>{const g=h.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:_}=r;if(_?.current&&S){const N=Math.abs(c.current-g.scrollTop);if(N>0){const w=window.innerHeight-k*2,u=parseFloat(S.style.minHeight),x=parseFloat(S.style.height),y=Math.max(u,x);if(y<w){const p=y+N,v=Math.min(w,p),O=p-v;S.style.height=v+"px",S.style.bottom==="0px"&&(g.scrollTop=O>0?O:0,S.style.justifyContent="flex-end")}}}c.current=g.scrollTop})})})]})});ut.displayName=Le;var pt="SelectGroup",[$s,zs]=ue(pt),Ws=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,l=Fe();return e.jsx($s,{scope:t,id:l,children:e.jsx(D.div,{role:"group","aria-labelledby":l,...a,ref:s})})});Ws.displayName=pt;var mt="SelectLabel",ht=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,l=zs(mt,t);return e.jsx(D.div,{id:l.id,...a,ref:s})});ht.displayName=mt;var je="SelectItem",[Ks,ft]=ue(je),xt=n.forwardRef((o,s)=>{const{__scopeSelect:t,value:a,disabled:l=!1,textValue:m,...r}=o,d=Z(je,t),c=Q(je,t),h=d.value===a,[g,S]=n.useState(m??""),[_,N]=n.useState(!1),w=F(s,p=>c.itemRefCallback?.(p,a,l)),u=Fe(),x=n.useRef("touch"),y=()=>{l||(d.onValueChange(a),d.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ks,{scope:t,value:a,disabled:l,textId:u,isSelected:h,onItemTextChange:n.useCallback(p=>{S(v=>v||(p?.textContent??"").trim())},[]),children:e.jsx(Ne.ItemSlot,{scope:t,value:a,disabled:l,textValue:g,children:e.jsx(D.div,{role:"option","aria-labelledby":u,"data-highlighted":_?"":void 0,"aria-selected":h&&_,"data-state":h?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...r,ref:w,onFocus:P(r.onFocus,()=>N(!0)),onBlur:P(r.onBlur,()=>N(!1)),onClick:P(r.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:P(r.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:P(r.onPointerDown,p=>{x.current=p.pointerType}),onPointerMove:P(r.onPointerMove,p=>{x.current=p.pointerType,l?c.onItemLeave?.():x.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:P(r.onPointerLeave,p=>{p.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:P(r.onKeyDown,p=>{c.searchRef?.current!==""&&p.key===" "||(Rs.includes(p.key)&&y(),p.key===" "&&p.preventDefault())})})})})});xt.displayName=je;var ge="SelectItemText",gt=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:a,style:l,...m}=o,r=Z(ge,t),d=Q(ge,t),c=ft(ge,t),h=Ls(ge,t),[g,S]=n.useState(null),_=F(s,y=>S(y),c.onItemTextChange,y=>d.itemTextRefCallback?.(y,c.value,c.disabled)),N=g?.textContent,w=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:N},c.value),[c.disabled,c.value,N]),{onNativeOptionAdd:u,onNativeOptionRemove:x}=h;return X(()=>(u(w),()=>x(w)),[u,x,w]),e.jsxs(e.Fragment,{children:[e.jsx(D.span,{id:c.textId,...m,ref:_}),c.isSelected&&r.valueNode&&!r.valueNodeHasChildren?Ze.createPortal(m.children,r.valueNode):null]})});gt.displayName=ge;var vt="SelectItemIndicator",St=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o;return ft(vt,t).isSelected?e.jsx(D.span,{"aria-hidden":!0,...a,ref:s}):null});St.displayName=vt;var Ue="SelectScrollUpButton",yt=n.forwardRef((o,s)=>{const t=Q(Ue,o.__scopeSelect),a=He(Ue,o.__scopeSelect),[l,m]=n.useState(!1),r=F(s,a.onScrollButtonChange);return X(()=>{if(t.viewport&&t.isPositioned){let d=function(){const h=c.scrollTop>0;m(h)};const c=t.viewport;return d(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),l?e.jsx(jt,{...o,ref:r,onAutoScroll:()=>{const{viewport:d,selectedItem:c}=t;d&&c&&(d.scrollTop=d.scrollTop-c.offsetHeight)}}):null});yt.displayName=Ue;var ke="SelectScrollDownButton",wt=n.forwardRef((o,s)=>{const t=Q(ke,o.__scopeSelect),a=He(ke,o.__scopeSelect),[l,m]=n.useState(!1),r=F(s,a.onScrollButtonChange);return X(()=>{if(t.viewport&&t.isPositioned){let d=function(){const h=c.scrollHeight-c.clientHeight,g=Math.ceil(c.scrollTop)<h;m(g)};const c=t.viewport;return d(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),l?e.jsx(jt,{...o,ref:r,onAutoScroll:()=>{const{viewport:d,selectedItem:c}=t;d&&c&&(d.scrollTop=d.scrollTop+c.offsetHeight)}}):null});wt.displayName=ke;var jt=n.forwardRef((o,s)=>{const{__scopeSelect:t,onAutoScroll:a,...l}=o,m=Q("SelectScrollButton",t),r=n.useRef(null),d=Ce(t),c=n.useCallback(()=>{r.current!==null&&(window.clearInterval(r.current),r.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),X(()=>{d().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),e.jsx(D.div,{"aria-hidden":!0,...l,ref:s,style:{flexShrink:0,...l.style},onPointerDown:P(l.onPointerDown,()=>{r.current===null&&(r.current=window.setInterval(a,50))}),onPointerMove:P(l.onPointerMove,()=>{m.onItemLeave?.(),r.current===null&&(r.current=window.setInterval(a,50))}),onPointerLeave:P(l.onPointerLeave,()=>{c()})})}),qs="SelectSeparator",bt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o;return e.jsx(D.div,{"aria-hidden":!0,...a,ref:s})});bt.displayName=qs;var Oe="SelectArrow",Gs=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,l=_e(t),m=Z(Oe,t),r=Q(Oe,t);return m.open&&r.position==="popper"?e.jsx(Jt,{...l,...a,ref:s}):null});Gs.displayName=Oe;var Ys="SelectBubbleInput",Nt=n.forwardRef(({__scopeSelect:o,value:s,...t},a)=>{const l=n.useRef(null),m=F(a,l),r=ds(s);return n.useEffect(()=>{const d=l.current;if(!d)return;const c=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(c,"value").set;if(r!==s&&g){const S=new Event("change",{bubbles:!0});g.call(d,s),d.dispatchEvent(S)}},[r,s]),e.jsx(D.select,{...t,style:{...us,...t.style},ref:m,defaultValue:s})});Nt.displayName=Ys;function Ct(o){return o===""||o===void 0}function _t(o){const s=$t(o),t=n.useRef(""),a=n.useRef(0),l=n.useCallback(r=>{const d=t.current+r;s(d),(function c(h){t.current=h,window.clearTimeout(a.current),h!==""&&(a.current=window.setTimeout(()=>c(""),1e3))})(d)},[s]),m=n.useCallback(()=>{t.current="",window.clearTimeout(a.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),[t,l,m]}function Tt(o,s,t){const l=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,m=t?o.indexOf(t):-1;let r=Xs(o,Math.max(m,0));l.length===1&&(r=r.filter(h=>h!==t));const c=r.find(h=>h.textValue.toLowerCase().startsWith(l.toLowerCase()));return c!==t?c:void 0}function Xs(o,s){return o.map((t,a)=>o[(s+a)%o.length])}var Js=et,It=st,Zs=ot,Qs=rt,en=at,Pt=lt,tn=ut,Et=ht,Rt=xt,sn=gt,nn=St,Mt=yt,At=wt,Dt=bt;const Ye=Js,Xe=Zs,Ve=n.forwardRef(({className:o,children:s,...t},a)=>e.jsxs(It,{ref:a,className:J("flex h-10 w-full items-center justify-between rounded-input border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[s,e.jsx(Qs,{asChild:!0,children:e.jsx(Qe,{className:"h-4 w-4 opacity-50"})})]}));Ve.displayName=It.displayName;const Lt=n.forwardRef(({className:o,...s},t)=>e.jsx(Mt,{ref:t,className:J("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(ps,{className:"h-4 w-4"})}));Lt.displayName=Mt.displayName;const Ut=n.forwardRef(({className:o,...s},t)=>e.jsx(At,{ref:t,className:J("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Qe,{className:"h-4 w-4"})}));Ut.displayName=At.displayName;const Be=n.forwardRef(({className:o,children:s,position:t="popper",...a},l)=>e.jsx(en,{children:e.jsxs(Pt,{ref:l,className:J("relative z-modal max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-dropdown data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...a,children:[e.jsx(Lt,{}),e.jsx(tn,{className:J("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ut,{})]})}));Be.displayName=Pt.displayName;const on=n.forwardRef(({className:o,...s},t)=>e.jsx(Et,{ref:t,className:J("py-2 pl-8 pr-2 text-sm font-semibold",o),...s}));on.displayName=Et.displayName;const de=n.forwardRef(({className:o,children:s,...t},a)=>e.jsxs(Rt,{ref:a,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(nn,{children:e.jsx(Zt,{className:"h-4 w-4"})})}),e.jsx(sn,{children:s})]}));de.displayName=Rt.displayName;const rn=n.forwardRef(({className:o,...s},t)=>e.jsx(Dt,{ref:t,className:J("-mx-1 my-1 h-px bg-muted",o),...s}));rn.displayName=Dt.displayName;class an{baseUrl="/api/admin";async getSystemStats(){return await W.get(`${this.baseUrl}/stats`)}async getUsers(s){const t=new URLSearchParams;s?.page&&t.append("page",s.page.toString()),s?.page_size&&t.append("page_size",s.page_size.toString()),s?.search&&t.append("search",s.search),s?.plan_filter&&t.append("plan_filter",s.plan_filter);const a=t.toString(),l=a?`${this.baseUrl}/users?${a}`:`${this.baseUrl}/users`;return(await W.get(l)).map(r=>({id:r.id,email:r.email,plan:r.plan,parsesThisMonth:r.parses_this_month,monthlyLimit:r.monthly_limit,customMonthlyLimit:r.custom_monthly_limit,isActive:r.is_active,emailVerified:r.email_verified,createdAt:r.created_at,lastLoginAt:r.last_login_at}))}async getUserDetails(s){const t=await W.get(`${this.baseUrl}/users/${s}`);return{user:{id:t.user.id,email:t.user.email,plan:t.user.plan,parsesThisMonth:t.user.parses_this_month,monthlyLimit:t.user.monthly_limit,customMonthlyLimit:t.user.custom_monthly_limit,isActive:t.user.is_active,emailVerified:t.user.email_verified,createdAt:t.user.created_at,lastLoginAt:t.user.last_login_at},statistics:t.statistics}}async updateUserLimits(s,t){return W.patch(`${this.baseUrl}/users/${s}/limits`,t)}async updateUserPlan(s,t){return W.patch(`${this.baseUrl}/users/${s}/plan`,t)}async resetUserUsage(s,t){return W.post(`${this.baseUrl}/users/${s}/reset-usage`,t||{})}async updateUser(s,t){return W.put(`${this.baseUrl}/users/${s}`,t)}async getJobs(s){const t=new URLSearchParams;s?.page&&t.append("page",s.page.toString()),s?.page_size&&t.append("page_size",s.page_size.toString()),s?.status_filter&&t.append("status_filter",s.status_filter),s?.user_email&&t.append("user_email",s.user_email);const a=t.toString(),l=a?`${this.baseUrl}/jobs?${a}`:`${this.baseUrl}/jobs`;return W.get(l)}async getWebhookEvents(s){const t=new URLSearchParams;s?.page&&t.append("page",s.page.toString()),s?.page_size&&t.append("page_size",s.page_size.toString()),s?.processed!==void 0&&t.append("processed",s.processed.toString());const a=t.toString(),l=a?`${this.baseUrl}/webhooks?${a}`:`${this.baseUrl}/webhooks`;return W.get(l)}}const ce=new an;function vn(){const[o,s]=n.useState(null),[t,a]=n.useState([]),[l,m]=n.useState(!0),[r,d]=n.useState(""),[c,h]=n.useState("all"),[g,S]=n.useState(null),[_,N]=n.useState(""),[w,u]=n.useState(""),[x,y]=n.useState(null),p=n.useCallback(async()=>{try{m(!0),y(null),Y.debug("AdminDashboard: Loading data...");try{const[i,C]=await Promise.all([ce.getSystemStats(),ce.getUsers({search:r||void 0,plan_filter:c==="all"?void 0:c,page_size:50})]);s(i),a(C),Y.debug("AdminDashboard: Data loaded successfully",{statsData:i,usersCount:C.length})}catch(i){Y.warn("AdminDashboard: API failed, using mock data for development",i);const C={total_users:5,active_users:3,total_jobs:12,jobs_today:2,total_parses:150,parses_today:8,storage_used_gb:2.5},U=[{id:"1",email:"user@example.com",plan:"standard",parsesThisMonth:10,monthlyLimit:100,isActive:!0,emailVerified:!0,createdAt:new Date().toISOString()},{id:"2",email:"admin@example.com",plan:"enterprise",parsesThisMonth:50,monthlyLimit:999999999,isActive:!0,emailVerified:!0,createdAt:new Date().toISOString()}];s(C),a(U)}}catch(i){const C=i instanceof Error&&"response"in i&&i.response&&typeof i.response=="object"&&"data"in i.response&&i.response.data&&typeof i.response.data=="object"&&"message"in i.response.data&&typeof i.response.data.message=="string"?i.response.data.message:"Failed to load admin data";Y.error("AdminDashboard: Error loading data",i),y(C),K.error(C)}finally{m(!1)}},[r,c]);n.useEffect(()=>{p()},[p]);const v=i=>{S(i),N(i.customMonthlyLimit||""),u(i.plan)},O=async()=>{if(g)try{await ce.updateUserLimits(g.id,{customMonthlyLimit:_===""?void 0:Number(_)}),K.success("User limits updated successfully"),S(null),p()}catch(i){Y.error("Failed to update limits:",i),K.error("Failed to update user limits")}},M=async()=>{if(g)try{await ce.updateUserPlan(g.id,{plan:w}),K.success("User plan updated successfully"),S(null),p()}catch(i){Y.error("Failed to update plan:",i),K.error("Failed to update user plan")}},ee=async i=>{if(confirm(`Reset usage for ${i.email}? This will set their monthly usage to 0.`))try{await ce.resetUserUsage(i.id,{reset_count:0}),K.success("User usage reset successfully"),p()}catch(C){Y.error("Failed to reset usage:",C),K.error("Failed to reset user usage")}},E=async i=>{try{await ce.updateUser(i.id,{is_active:!i.isActive}),K.success(`User ${i.isActive?"deactivated":"activated"} successfully`),p()}catch(C){Y.error("Failed to toggle user status:",C),K.error("Failed to update user status")}},L=i=>new Date(i).toLocaleDateString(),V=i=>{switch(i){case"enterprise":return"default";case"standard":return"secondary";default:return"outline"}};return l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading admin dashboard..."})]})}):x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-destructive/15 text-destructive p-4 rounded-lg mb-4",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-sm",children:x})]}),e.jsxs(ie,{onClick:p,variant:"outline",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage users, monitor system performance, and view analytics"})]}),e.jsxs(ie,{onClick:p,variant:"outline",size:"sm",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(me,{children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o?.total_users||0}),e.jsxs("p",{className:"text-caption text-muted-foreground",children:[o?.active_users||0," active"]})]})]}),e.jsxs(me,{children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Jobs"}),e.jsx(es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o?.total_jobs||0}),e.jsxs("p",{className:"text-caption text-muted-foreground",children:[o?.jobs_today||0," today"]})]})]}),e.jsxs(me,{children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Parses"}),e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o?.total_parses||0}),e.jsxs("p",{className:"text-caption text-muted-foreground",children:[o?.parses_today||0," today"]})]})]}),e.jsxs(me,{children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Storage Used"}),e.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(xe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o?.storage_used_gb?.toFixed(1)||0," GB"]}),e.jsx("p",{className:"text-caption text-muted-foreground",children:"System storage"})]})]})]}),e.jsxs(me,{children:[e.jsxs(he,{children:[e.jsx(fe,{children:"User Management"}),e.jsx(ss,{children:"Manage user accounts, plans, and usage limits"}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("div",{className:"flex-1 max-w-sm",children:[e.jsx(we,{htmlFor:"search",children:"Search Users"}),e.jsxs("div",{className:"relative",children:[e.jsx(ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ze,{id:"search",placeholder:"Search by email...",className:"pl-8",value:r,onChange:i=>d(i.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(we,{htmlFor:"plan-filter",children:"Filter by Plan"}),e.jsxs(Ye,{value:c,onValueChange:h,children:[e.jsx(Ve,{id:"plan-filter",className:"w-40",children:e.jsx(Xe,{placeholder:"All plans"})}),e.jsxs(Be,{children:[e.jsx(de,{value:"all",children:"All plans"}),e.jsx(de,{value:"standard",children:"Standard"}),e.jsx(de,{value:"enterprise",children:"Enterprise"})]})]})]})]})]}),e.jsx(xe,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(hs,{children:[e.jsx(fs,{children:e.jsxs(We,{children:[e.jsx(ne,{children:"User"}),e.jsx(ne,{children:"Plan"}),e.jsx(ne,{children:"Usage"}),e.jsx(ne,{children:"Limits"}),e.jsx(ne,{children:"Status"}),e.jsx(ne,{children:"Joined"}),e.jsx(ne,{})]})}),e.jsx(xs,{children:t.map(i=>e.jsxs(We,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.email}),!i.emailVerified&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Email not verified"})]})}),e.jsx(oe,{children:e.jsxs(ns,{variant:V(i.plan),children:[i.plan,i.plan==="enterprise"&&e.jsx(os,{className:"h-3 w-3 ml-1"})]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-sm",children:[i.parsesThisMonth.toLocaleString()," /"," ",i.monthlyLimit===999999999?"∞":i.monthlyLimit.toLocaleString()]}),i.customMonthlyLimit&&e.jsx("div",{className:"text-caption text-muted-foreground",children:"Custom limit"})]}),e.jsx(oe,{children:i.customMonthlyLimit?e.jsxs("span",{className:"text-sm",children:[i.customMonthlyLimit.toLocaleString()," (custom)"]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Default"})}),e.jsx(oe,{children:i.isActive?e.jsxs("div",{className:"flex items-center text-status-success",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Active"]}):e.jsxs("div",{className:"flex items-center text-status-error",children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),"Inactive"]})}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:L(i.createdAt)}),e.jsx(oe,{children:e.jsxs(rs,{children:[e.jsx(as,{asChild:!0,children:e.jsx(ie,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Cs,{className:"h-4 w-4"})})}),e.jsxs(ls,{align:"end",children:[e.jsx(is,{children:"Actions"}),e.jsx(cs,{}),e.jsxs(Ae,{onClick:()=>v(i),children:[e.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Edit Limits"]}),e.jsxs(Ae,{onClick:()=>ee(i),children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Reset Usage"]}),e.jsx(Ae,{onClick:()=>E(i),children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]})})]},i.id))})]})})})]}),e.jsx(gs,{open:!!g,onOpenChange:()=>S(null),children:e.jsxs(vs,{className:"sm:max-w-[425px]",children:[e.jsxs(Ss,{children:[e.jsxs(ys,{children:["Edit User: ",g?.email]}),e.jsx(ws,{children:"Update user plan and custom limits"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(we,{htmlFor:"plan",children:"Plan"}),e.jsxs(Ye,{value:w,onValueChange:u,children:[e.jsx(Ve,{children:e.jsx(Xe,{})}),e.jsxs(Be,{children:[e.jsx(de,{value:"standard",children:"Standard"}),e.jsx(de,{value:"enterprise",children:"Enterprise"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(we,{htmlFor:"custom-limit",children:"Custom Monthly Limit"}),e.jsx(ze,{id:"custom-limit",type:"number",placeholder:"Leave empty for default",value:_,onChange:i=>N(i.target.value===""?"":Number(i.target.value))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave empty to use default plan limit"})]})]}),e.jsxs(js,{children:[e.jsx(ie,{variant:"outline",onClick:()=>S(null),children:"Cancel"}),e.jsx(ie,{onClick:M,children:"Update Plan"}),e.jsx(ie,{onClick:O,children:"Update Limits"})]})]})})]})}export{vn as default};
//# sourceMappingURL=AdminDashboard-CtXHfmVc.js.map
