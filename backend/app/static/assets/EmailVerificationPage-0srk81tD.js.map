{"version":3,"file":"EmailVerificationPage-0srk81tD.js","sources":["../../src/pages/auth/EmailVerificationPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link, useSearchParams, Navigate } from 'react-router-dom';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Loader2, CheckCircle, XCircle } from 'lucide-react';\r\n\r\nexport default function EmailVerificationPage() {\r\n  const { user, verifyEmail } = useAuth();\r\n  const [searchParams] = useSearchParams();\r\n  const [verifying, setVerifying] = useState(true);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const token = searchParams.get('token');\r\n\r\n  useEffect(() => {\r\n    const handleVerification = async () => {\r\n      if (!token) {\r\n        setError('Verification token is missing');\r\n        setVerifying(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await verifyEmail(token);\r\n        setSuccess(true);\r\n      } catch (err: unknown) {\r\n        const errorMessage = err instanceof Error && 'response' in err && \r\n          err.response && typeof err.response === 'object' && \r\n          'data' in err.response && \r\n          err.response.data && typeof err.response.data === 'object' && \r\n          'message' in err.response.data && \r\n          typeof err.response.data.message === 'string'\r\n          ? err.response.data.message\r\n          : 'Email verification failed';\r\n        setError(errorMessage);\r\n      } finally {\r\n        setVerifying(false);\r\n      }\r\n    };\r\n\r\n    handleVerification();\r\n  }, [token, verifyEmail]);\r\n\r\n  // Redirect if user is already logged in and verified\r\n  if (user && user.emailVerified) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  if (verifying) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\r\n        <Card className=\"w-full max-w-md\">\r\n          <CardHeader className=\"text-center\">\r\n            <div className=\"flex justify-center mb-6\">\r\n              <Link to=\"/\">\r\n                <img src=\"/logo-with-name.png\" alt=\"TidyFrame\" className=\"h-12\" />\r\n              </Link>\r\n            </div>\r\n            <div className=\"flex justify-center mb-4\">\r\n              <Loader2 className=\"h-12 w-12 text-primary animate-spin\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold\">Verifying your email</CardTitle>\r\n            <CardDescription>\r\n              Please wait while we verify your email address...\r\n            </CardDescription>\r\n          </CardHeader>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (success) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\r\n        <Card className=\"w-full max-w-md\">\r\n          <CardHeader className=\"text-center\">\r\n            <div className=\"flex justify-center mb-6\">\r\n              <Link to=\"/\">\r\n                <img src=\"/logo-with-name.png\" alt=\"TidyFrame\" className=\"h-12\" />\r\n              </Link>\r\n            </div>\r\n            <div className=\"flex justify-center mb-4\">\r\n              <CheckCircle className=\"h-12 w-12 text-status-success\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold text-status-success\">\r\n              Email verified successfully!\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Your email address has been verified. You can now access all features.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          \r\n          <CardFooter className=\"flex flex-col space-y-4\">\r\n            <Link to=\"/dashboard\" className=\"w-full\">\r\n              <Button className=\"w-full\">\r\n                Go to Dashboard\r\n              </Button>\r\n            </Link>\r\n          </CardFooter>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center\">\r\n          <div className=\"flex justify-center mb-6\">\r\n            <Link to=\"/\">\r\n              <img src=\"/logo-with-name.png\" alt=\"TidyFrame\" className=\"h-12\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"flex justify-center mb-4\">\r\n            <XCircle className=\"h-12 w-12 text-status-error\" />\r\n          </div>\r\n          <CardTitle className=\"text-2xl font-bold text-status-error\">\r\n            Email verification failed\r\n          </CardTitle>\r\n          <CardDescription>\r\n            We couldn't verify your email address\r\n          </CardDescription>\r\n        </CardHeader>\r\n        \r\n        <CardContent>\r\n          {error && (\r\n            <Alert variant=\"destructive\">\r\n              <AlertDescription>{error}</AlertDescription>\r\n            </Alert>\r\n          )}\r\n        </CardContent>\r\n        \r\n        <CardFooter className=\"flex flex-col space-y-4\">\r\n          <p className=\"text-sm text-muted-foreground text-center\">\r\n            The verification link may have expired or is invalid. \r\n            Please request a new verification email from your account settings.\r\n          </p>\r\n          \r\n          <div className=\"flex flex-col sm:flex-row gap-2 w-full\">\r\n            <Link to=\"/auth/login\" className=\"flex-1\">\r\n              <Button variant=\"outline\" className=\"w-full\">\r\n                Sign In\r\n              </Button>\r\n            </Link>\r\n            <Link to=\"/dashboard\" className=\"flex-1\">\r\n              <Button className=\"w-full\">\r\n                Go to Dashboard\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n        </CardFooter>\r\n      </Card>\r\n    </div>\r\n  );\r\n}"],"names":["EmailVerificationPage","user","verifyEmail","useAuth","searchParams","useSearchParams","verifying","setVerifying","useState","success","setSuccess","error","setError","token","useEffect","err","errorMessage","jsx","Navigate","Card","jsxs","CardHeader","Link","Loader2","CardTitle","CardDescription","CheckCircle","CardFooter","Button","XCircle","CardContent","Alert","AlertDescription"],"mappings":"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"}