{"version":3,"file":"AdminLayout-CVHjilw5.js","sources":["../../node_modules/lucide-react/dist/esm/icons/webhook.js","../../src/pages/admin/AdminLayout.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2\",\n      key: \"q3hayz\"\n    }\n  ],\n  [\"path\", { d: \"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06\", key: \"1go1hn\" }],\n  [\"path\", { d: \"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8\", key: \"qlwsc0\" }]\n];\nconst Webhook = createLucideIcon(\"webhook\", __iconNode);\n\nexport { __iconNode, Webhook as default };\n//# sourceMappingURL=webhook.js.map\n","import { Outlet, Link, useLocation } from 'react-router-dom';\nimport { logger } from '@/utils/logger';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { \n  Home,\n  Users,\n  BarChart3,\n  Settings,\n  LogOut,\n  Menu,\n  Shield,\n  Activity,\n  Webhook,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useState } from 'react';\n\nconst sidebarItems = [\n  {\n    title: 'Overview',\n    href: '/admin',\n    icon: Home,\n  },\n  {\n    title: 'User Management',\n    href: '/admin/users',\n    icon: Users,\n  },\n  {\n    title: 'System Stats',\n    href: '/admin/stats',\n    icon: BarChart3,\n  },\n  {\n    title: 'Jobs Monitor',\n    href: '/admin/jobs',\n    icon: Activity,\n  },\n  {\n    title: 'Webhooks',\n    href: '/admin/webhooks',\n    icon: Webhook,\n  },\n];\n\nexport default function AdminLayout() {\n  const { user, logout } = useAuth();\n  const location = useLocation();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  \n  logger.debug('AdminLayout rendering, user:', user);\n  logger.debug('User plan:', user?.plan);\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  // Check if user is admin - for development, allow all authenticated users\n  // TODO: Implement proper admin role checking in production\n  logger.debug('AdminLayout: User plan check:', user?.plan);\n  logger.debug('AdminLayout: NODE_ENV:', process.env.NODE_ENV);\n  logger.debug('AdminLayout: import.meta.env.DEV:', import.meta.env.DEV);\n  \n  // In development mode, allow all authenticated users to access admin\n  // In production, only allow enterprise and standard plan users\n  const isDevelopment = import.meta.env.DEV || import.meta.env.MODE === 'development';\n  const hasValidPlan = user?.plan === 'enterprise' || user?.plan === 'standard';\n  // Also allow if user exists but has no plan (development scenario)\n  const isAdmin = isDevelopment || hasValidPlan || (isDevelopment && user && !user.plan);\n  \n  logger.debug('AdminLayout: Permission check:', { isDevelopment, hasValidPlan, isAdmin });\n  \n  if (!isAdmin) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <Shield className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n          <h1 className=\"text-2xl font-bold mb-2\">Access Denied</h1>\n          <p className=\"text-muted-foreground mb-4\">\n            You need admin privileges to access this area.\n          </p>\n          <div className=\"space-y-2\">\n            <p className=\"text-sm text-muted-foreground\">\n              Current plan: {user?.plan || 'unknown'}\n            </p>\n            <Link to=\"/dashboard\">\n              <Button>Go to Dashboard</Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Mobile sidebar toggle */}\n      <div className=\"lg:hidden\">\n        <Button\n          variant=\"ghost\"\n          className=\"fixed top-4 left-4 z-modal\"\n          onClick={() => setSidebarOpen(!sidebarOpen)}\n        >\n          <Menu className=\"h-6 w-6\" />\n        </Button>\n      </div>\n\n      <div className=\"flex\">\n        {/* Sidebar */}\n        <aside\n          className={cn(\n            'fixed inset-y-0 left-0 z-sidebar w-64 bg-gradient-to-b from-primary/5 to-card border-r transition-transform duration-slow ease-apple lg:translate-x-0',\n            sidebarOpen ? 'translate-x-0' : '-translate-x-full'\n          )}\n        >\n          <div className=\"flex h-full flex-col\">\n            {/* Logo */}\n            <div className=\"flex h-16 items-center border-b px-6\">\n              <Link to=\"/\" className=\"flex items-center space-x-2\">\n                <img src=\"/logo-with-name.png\" alt=\"TidyFrame Admin\" className=\"h-50\" />\n              </Link>\n            </div>\n\n            {/* Navigation */}\n            <nav className=\"flex-1 space-y-2 px-4 py-6\">\n              {sidebarItems.map((item) => {\n                const Icon = item.icon;\n                const isActive = location.pathname === item.href || \n                  (item.href === '/admin' && location.pathname === '/admin/dashboard');\n                \n                return (\n                  <Link\n                    key={item.href}\n                    to={item.href}\n                    className={cn(\n                      'flex items-center space-x-3 rounded-md px-3 py-2 text-sm font-medium transition-colors',\n                      isActive\n                        ? 'bg-primary/30 text-primary font-semibold border-l-4 border-primary'\n                        : 'text-muted-foreground hover:bg-primary/10 hover:text-primary'\n                    )}\n                    onClick={() => setSidebarOpen(false)}\n                  >\n                    <Icon className=\"h-4 w-4\" />\n                    <span>{item.title}</span>\n                  </Link>\n                );\n              })}\n            </nav>\n\n            {/* Back to Dashboard */}\n            <div className=\"px-4 pb-4\">\n              <Link to=\"/dashboard\">\n                <Button variant=\"outline\" className=\"w-full\">\n                  <Home className=\"h-4 w-4 mr-2\" />\n                  Back to Dashboard\n                </Button>\n              </Link>\n            </div>\n\n            {/* User Menu */}\n            <div className=\"border-t p-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" className=\"w-full justify-start space-x-2\">\n                    <Avatar className=\"h-8 w-8\">\n                      <AvatarFallback>\n                        {user?.fullName?.charAt(0) || user?.email.charAt(0).toUpperCase()}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex flex-col items-start\">\n                      <span className=\"text-sm font-medium\">\n                        {user?.fullName || user?.email}\n                      </span>\n                      <span className=\"text-caption text-muted-foreground\">\n                        Administrator\n                      </span>\n                    </div>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-56\">\n                  <DropdownMenuLabel>Admin Account</DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem>\n                    <Settings className=\"mr-2 h-4 w-4\" />\n                    <span>Settings</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={handleLogout} className=\"cursor-pointer\">\n                    <LogOut className=\"mr-2 h-4 w-4\" />\n                    <span>Log out</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          </div>\n        </aside>\n\n        {/* Main content */}\n        <main className=\"flex-1 lg:ml-64\">\n          {/* Top bar */}\n          <header className=\"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n            <div className=\"flex h-16 items-center justify-between px-6\">\n              <div className=\"lg:hidden\" /> {/* Spacer for mobile */}\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                  <Shield className=\"h-4 w-4\" />\n                  <span>Admin Panel</span>\n                </div>\n              </div>\n            </div>\n          </header>\n\n          {/* Page content */}\n          <div className=\"p-6\">\n            <Outlet />\n          </div>\n        </main>\n      </div>\n\n      {/* Mobile overlay */}\n      {sidebarOpen && (\n        <div\n          className=\"fixed inset-0 z-overlay bg-black/50 lg:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n    </div>\n  );\n}"],"names":["__iconNode","Webhook","createLucideIcon","sidebarItems","Home","Users","BarChart3","Activity","AdminLayout","user","logout","useAuth","location","useLocation","sidebarOpen","setSidebarOpen","useState","logger","handleLogout","isDevelopment","hasValidPlan","isAdmin","jsxs","jsx","Button","Menu","cn","Link","item","Icon","isActive","DropdownMenu","DropdownMenuTrigger","Avatar","AvatarFallback","DropdownMenuContent","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuItem","Settings","LogOut","Shield","Outlet"],"mappings":"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","x_google_ignoreList":[0]}